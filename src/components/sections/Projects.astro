---
import Container from "../shared/Container.astro";

// Proyectos
const projects = [
  {
    title: "Sistema de reservas para hotel",
    description: "Este sistema permite que los clientes vean paquetes, precios y hagan reservas.",
    repo: "https://github.com/tuusuario/task-manager",
    image: "/projects/image1.png"
  },
  {
    title: "Sistema de Biblioteca",
    description: "Gestión de libros para administradores y vista previa para clientes.",
    repo: "https://github.com/tuusuario/library-system",
    image: "/projects/image2.png"
  },
  {
    title: "Punto de ventas comercial",
    description: "Gestión de productos y compras en línea para clientes.",
    repo: "https://github.com/tuusuario/pos-system",
    image: "/projects/image3.png"
  },
  {
    title: "Dashboard financiero",
    description: "Visualización de ingresos, gastos y estadísticas en tiempo real.",
    repo: "https://github.com/tuusuario/finance-dashboard",
    image: "/projects/image4.png"
  },
  {
    title: "Red social estudiantil",
    description: "Conexión entre estudiantes, publicaciones, mensajes y perfiles.",
    repo: "https://github.com/tuusuario/student-network",
    image: "/projects/image5.png"
  },
  {
    title: "App de clima",
    description: "Consulta del clima en tiempo real con interfaz moderna.",
    repo: "https://github.com/tuusuario/weather-app",
    image: "/projects/image6.png"
  }
];
---

<section id="projects" class="relative py-24 overflow-visible">
  <!-- Decorativos -->
  <div class="absolute top-16 left-5 w-72 h-72 rounded-full bg-indigo-500 blur-3xl opacity-60 -rotate-[55deg] skew-y-12"></div>
  <div class="absolute bottom-10 right-5 w-72 h-72 rounded-full bg-green-500 blur-3xl opacity-60 rotate-[100deg] skew-x-12"></div>
  <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-[500px] h-[500px] bg-gradient-to-br from-green-400 to-blue-500 blur-[150px] opacity-30 z-0"></div>

  <Container className="relative z-10 overflow-visible">
    <h2 class="text-3xl lg:text-4xl font-bold text-heading-1 text-center mb-10">
      My Projects
    </h2>

    <!-- Carrusel -->
    <div class="relative overflow-visible">
      <!-- Flechas elegantes -->
      <button id="prev" aria-label="Previous project"
        class="absolute left-3 md:left-5 top-1/2 -translate-y-1/2 z-20 bg-white/10 hover:bg-white/20 
               text-white p-3 md:p-4 rounded-full backdrop-blur-md transition-all duration-300 
               shadow-md hover:shadow-xl border border-white/20 hover:scale-110">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 md:w-8 md:h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>

      <button id="next" aria-label="Next project"
        class="absolute right-3 md:right-5 top-1/2 -translate-y-1/2 z-20 bg-white/10 hover:bg-white/20 
               text-white p-3 md:p-4 rounded-full backdrop-blur-md transition-all duration-300 
               shadow-md hover:shadow-xl border border-white/20 hover:scale-110">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 md:w-8 md:h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>

      <!-- Vista -->
      <div class="overflow-visible">
        <div id="carousel" class="flex transition-transform duration-500 ease-in-out gap-10">
          {projects.map(project => (
            <div class="w-full md:w-1/2 lg:w-1/3 flex-shrink-0">
              <div class="bg-box-bg border border-box-border rounded-2xl p-6 
                shadow-lg hover:shadow-xl hover:shadow-primary transition-transform duration-300 
                transform hover:scale-105 hover:-translate-y-2 text-center flex flex-col items-center relative z-10">

                <!-- Mockup -->
                <div class="relative w-full overflow-hidden rounded-xl">
                  <div class="w-full h-52 bg-black overflow-hidden rounded-t-xl border-[6px] border-gray-800 shadow-inner">
                    <img src={project.image} alt={project.title} class="w-full h-full object-cover rounded-t-xl" />
                  </div>
                  <div class="w-3/4 mx-auto h-2 bg-gray-700 rounded-b-lg -mt-1 relative z-10"></div>
                  <div class="w-11/12 h-5 bg-gray-900 rounded-b-xl shadow-md mx-auto mt-1"></div>
                </div>

                <!-- Info -->
                <h3 class="text-xl font-semibold text-heading-1 mt-4">{project.title}</h3>
                <p class="text-heading-2 mt-2 mb-4">{project.description}</p>

                <!-- GitHub -->
                <a href={project.repo} target="_blank" rel="noopener noreferrer"
                  class="inline-flex items-center px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-blue-500 transition duration-300">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-5 h-5 mr-2" viewBox="0 0 24 24">
                    <path d="M12 0C5.37 0 0 5.373 0 12a12 12 0 008.205 11.432c.6.111.82-.26.82-.577v-2.17c-3.338.727-4.033-1.61-4.033-1.61-.546-1.389-1.334-1.76-1.334-1.76-1.09-.745.083-.729.083-.729 1.205.085 1.84 1.24 1.84 1.24 1.07 1.835 2.809 1.305 3.495.998.108-.775.418-1.305.76-1.605-2.665-.305-5.467-1.332-5.467-5.932 0-1.31.47-2.38 1.236-3.22-.124-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23a11.45 11.45 0 013.003-.403c1.02.004 2.045.137 3.003.403 2.29-1.552 3.296-1.23 3.296-1.23.654 1.653.243 2.873.12 3.176.77.84 1.234 1.91 1.234 3.22 0 4.61-2.807 5.624-5.48 5.92.43.37.814 1.096.814 2.21v3.284c0 .32.216.694.825.576A12.002 12.002 12z"/>
                  </svg>
                  View Repo
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </Container>
</section>

<!-- Carrusel Script -->
<script>
  const prevButton = document.getElementById('prev');
  const nextButton = document.getElementById('next');
  const carousel = document.getElementById('carousel');

  const projectCount = document.querySelectorAll('#carousel > div').length;
  let currentIndex = 0;

  function moveCarousel() {
    carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
  }

  prevButton.addEventListener('click', () => {
    currentIndex = (currentIndex === 0) ? projectCount - 1 : currentIndex - 1;
    moveCarousel();
  });

  nextButton.addEventListener('click', () => {
    currentIndex = (currentIndex === projectCount - 1) ? 0 : currentIndex + 1;
    moveCarousel();
  });
</script>
